(function(l,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("yup")):typeof define=="function"&&define.amd?define(["exports","vue","yup"],e):(l=typeof globalThis<"u"?globalThis:l||self,e(l.VueHelloComponent={},l.Vue,l.Yup))})(this,function(l,e,v){"use strict";function w(n){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const r in n)if(r!=="default"){const s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(o,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}return o.default=n,Object.freeze(o)}const _=w(v),k=(n,o)=>{const r=n.__vccOpts||n;for(const[s,i]of o)r[s]=i;return r},y=n=>(e.pushScopeId("data-v-d91e72d3"),n=n(),e.popScopeId(),n),S={class:"image-selector__inner"},b=[y(()=>e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1))],E=["src"],j=[e.createStaticVNode('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-v-d91e72d3><path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" data-v-d91e72d3></path></svg><div class="placeholder-text" data-v-d91e72d3><span data-v-d91e72d3>Drag &amp; Drop</span><br data-v-d91e72d3><span data-v-d91e72d3>or <span class="browse-btn" data-v-d91e72d3>Browse</span></span><br data-v-d91e72d3><span class="supported-formats" data-v-d91e72d3>Supports: JPEG, JPG, PNG, WEBP</span></div>',2)],B=k({__name:"ImageSelector",props:{select:{type:Function,required:!0},reset:{type:Function,required:!0},state:{type:Object,required:!0}},setup(n){const o=e.ref(null),r=e.ref(!1),s=n,i=()=>s.state.image?URL.createObjectURL(s.state.image):"",p=t=>{r.value=!0},u=t=>{r.value=!0},f=t=>{r.value=!1},m=t=>{r.value=!1,s.select(t)},g=t=>{r.value=!1,s.reset(t)},d=()=>{o.value.click()};return(t,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["image-selector__wrapper",{"image-selector__selected":s.state.image},{"drag-over":r.value}]),onDrop:e.withModifiers(m,["prevent"]),onDragenter:e.withModifiers(p,["prevent"]),onDragover:e.withModifiers(u,["prevent"]),onDragleave:e.withModifiers(f,["prevent"])},[e.createElementVNode("div",S,[s.state.image?(e.openBlock(),e.createElementBlock("div",{key:0,class:"image-selector__reset-btn",onClick:g},b)):e.createCommentVNode("",!0),s.state.image?(e.openBlock(),e.createElementBlock("img",{key:1,class:"image-selector__img",src:i(),alt:"",onClick:d},null,8,E)):(e.openBlock(),e.createElementBlock("div",{key:2,class:"image-selector__placeholder",onClick:d},j)),e.createElementVNode("input",{onChange:a[0]||(a[0]=(...c)=>s.select&&s.select(...c)),type:"file",class:"image-selector__file-input",ref_key:"fileInput",ref:o},null,544)])],34))}},[["__scopeId","data-v-d91e72d3"]]);function h(n={}){const o=e.reactive({image:null,error:null,touched:!1}),r=e.reactive({onSelect:n.onSelect||null,onReset:n.onReset||null}),s=_.object({image:_.mixed().test("fileFormat","Unsupported file format",t=>{if(!t)return!0;const a=["jpg","jpeg","png","webp"],c=t.name.split(".").pop().toLowerCase();return a.includes(c)}).test("fileSize","File size is too large",t=>{if(!t)return!0;const a=5*1024*1024;return t.size<=a}).required("Please select an image file").label("Image")});function i(t){r.onSelect=t}function p(t){r.onReset=t}async function u(t){let a;if(t.type==="change"?a=t.target.files[0]:t.type==="drop"&&(a=t.dataTransfer.files[0]),!!a)try{await s.validate({image:a}),o.image=a,o.touched=!0,o.error=null,typeof r.onSelect=="function"&&r.onSelect(o.image)}catch(c){o.error=c.errors[0]}}function f(){o.image=null,o.error=null,o.touched=!1,typeof r.onReset=="function"&&r.onReset()}function m(){return!!o.error}function g(){return o.error}function d(t){o.error=t}return{select:u,reset:f,onSelect:i,onReset:p,hasError:m,getError:g,setError:d,state:o}}const D={install(n,o){n.component("ImageSelector",B),n.config.globalProperties.$useImageSelector=h}};l.default=D,l.useImageSelector=h,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
